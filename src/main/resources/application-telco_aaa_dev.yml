# Server Configuration
quarkus:
  http:
    port: 8085
  datasource:
    db-kind: oracle
    username: aaa
    password: Aaa!89nky78D
    reactive:
      url: oracle:thin:@aaa-dev.cn8eyeqma3tp.ap-southeast-2.rds.amazonaws.com:1521/ORCL

      # Connection Pool Configuration (Dev settings - lower than production)
      max-size: 20
      event-loop-size: 8
      idle-timeout: PT15M
      max-lifetime: PT15M
      cache-prepared-statements: true
      reconnect-attempts: 3
      reconnect-interval: PT2S
      shared: false
      name: oracle-pool

      # Vert.x/Quarkus Level Connection Timeout (CRITICAL - controls initial connection)
      connect-timeout: PT30S     # 30s timeout for connection establishment at Vert.x level

      # Oracle JDBC Driver Properties
      additional-properties:
        # Statement Caching
        oracle.jdbc.implicitStatementCacheSize: "250"

        # Connection Timeout Settings (Oracle JDBC 23.x)
        oracle.jdbc.ReadTimeout: "60000"                   # Read timeout in ms (60s)
        oracle.net.CONNECT_TIMEOUT: "30000"                # JDBC connection timeout in ms (30s)
        oracle.net.READ_TIMEOUT: "60000"                   # Socket read timeout in ms (60s)
        oracle.net.TCP_CONNTIMEOUT_STR: "30000"            # TCP connection timeout in ms (30s)
        oracle.net.ns.SOCKET_CONNECT_TIMEOUT: "30000"      # Socket connect timeout in ms (30s)
        oracle.jdbc.loginTimeout: "60"                     # Login timeout in seconds

        # Performance Optimization
        oracle.jdbc.defaultRowPrefetch: "100"

        # Connection Stability
        oracle.net.keepAlive: "true"                       # TCP keepalive enabled
        oracle.net.disableOob: "true"                      # Disable out-of-band breaks
        oracle.net.OUTBOUND_CONNECT_TIMEOUT: "30000"       # Outbound connection timeout (30s)

  log:
    level: INFO
    console:
      format: "%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n"
  console:
    color: true
# Kafka Configuration

kafka:
  bootstrap:
    servers: confluent-ctrl-0-svc.rkafkacone.svc.cluster.local:9092

mp:
  messaging:
    incoming:
      db-write-events:
        connector: smallrye-kafka
        topic: DC-DR
        group.id: accounting-dc-group
        value.deserializer: io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
        key.deserializer: org.apache.kafka.common.serialization.StringDeserializer
        auto.offset.reset: earliest
        enable.auto.commit: true
        max.poll.records: 100
        max.poll.interval.ms: 300000
        session.timeout.ms: 30000
        failure-strategy: ignore
